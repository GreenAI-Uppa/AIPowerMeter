
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Advanced use &#8212; IA Power Meter  documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Dev Documentation" href="modules.html" />
    <link rel="prev" title="Background on power measure" href="../background/background.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="advanced-use">
<h1>Advanced use<a class="headerlink" href="#advanced-use" title="Permalink to this headline">¶</a></h1>
<div class="section" id="recorded-fields">
<span id="json"></span><h2>Recorded fields<a class="headerlink" href="#recorded-fields" title="Permalink to this headline">¶</a></h2>
<p>Recording are logged in a json file and include the power draw and the use of the CPU and GPU for the pids related to your experiment. Some of the recordings are done for each pid related to your experiments: <cite>metric_name : {… pid_i: v_i, ….}</cite>
Unless specified otherwise, the power is logged in watts.</p>
<p><strong>CPU use</strong></p>
<p><cite>cpu_uses</cite>: percentage of cpu clock used by this pid during the recording.</p>
<p><cite>mem_use_abs</cite>: Number of bytes used in the CPU RAM. The recording uses psutil in the background, check: <a class="reference internal" href="modules.html#deep_learning_power_measure.power_measure.rapl_power.get_mem_uses" title="deep_learning_power_measure.power_measure.rapl_power.get_mem_uses"><code class="xref py py-func docutils literal notranslate"><span class="pre">deep_learning_power_measure.power_measure.rapl_power.get_mem_uses()</span></code></a> for more details.</p>
<p><cite>mem_use_abs</cite>: Relative number of bytes.</p>
<p><strong>CPU power</strong></p>
<p><cite>Intel_power</cite>: total consumption measured by RAPL</p>
<p><cite>psys_power</cite>: System on chip consumption</p>
<p><cite>uncore_power</cite>: some graphic cards, but not nvidia gpu</p>
<p><cite>total_cpu_power</cite>: core power consumption.</p>
<p>In other words, you have the following relations:</p>
<div class="math notranslate nohighlight">
\[Intel\_power = psys + uncore + total\_cpu\]</div>
<p>For the ram and the core power, we multiply by the cpu and memory use of each pid to get the per process value in the fields <cite>per_process_cpu_power</cite> and <cite>per_process_dram_power</cite>.</p>
<p>Check the <a class="reference internal" href="../background/background.html#rapl"><span class="std std-ref">CPU and RAPL</span></a> section for more details on RAPL domains, and <a class="reference internal" href="modules.html#deep_learning_power_measure.power_measure.rapl_power.get_power" title="deep_learning_power_measure.power_measure.rapl_power.get_power"><code class="xref py py-func docutils literal notranslate"><span class="pre">deep_learning_power_measure.power_measure.rapl_power.get_power()</span></code></a> for implementation details. The support for different power domains varies according to the processor model, our library will ignore not available domains.</p>
<p><strong>GPU use</strong></p>
<p><cite>sm</cite>: Streaming multiprocessor usage. Analog to the <cite>cpu_uses</cite> for the gpu.</p>
<p><cite>memory</cite>: Number of bytes used in the GPU</p>
<p><strong>GPU power</strong></p>
<p>This is done by the nvidia-smi tool supported by the NVML library of nvidia. The record are done per pid and per gpu.</p>
<p><cite>nvidia_draw_absolute</cite>: the amount of power used by the whole nvidia card.</p>
</div>
<div class="section" id="model-complexity">
<h2>model complexity<a class="headerlink" href="#model-complexity" title="Permalink to this headline">¶</a></h2>
<p>You can log the number of parameters and the number of multiply and add (mac) operations of your model.
Currently, only pytorch is supported, and tensorflow should be supported shortly</p>
</div>
<div class="section" id="threading">
<h2>Threading<a class="headerlink" href="#threading" title="Permalink to this headline">¶</a></h2>
<p>In practice, a thread is launched to record the energy of your program.</p>
<div class="figure align-default" id="id1">
<img alt="../_images/multi_threading.png" src="../_images/multi_threading.png" />
<p class="caption"><span class="caption-text">Interaction between the experiment and the recording threads</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<p>If you want to record also the time, accuracy and other valuable metrics in the main program and then, interpolate with the energy values</p>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">IA Power Meter</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="quick_start.html">Quick start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../background/background.html">Background on power measure</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Advanced use</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#recorded-fields">Recorded fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="#model-complexity">model complexity</a></li>
<li class="toctree-l2"><a class="reference internal" href="#threading">Threading</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">Dev Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="good_practices.html">Good practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../experiments/experiments.html">Insights into energy consumption</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="../background/background.html" title="previous chapter">Background on power measure</a></li>
      <li>Next: <a href="modules.html" title="next chapter">Dev Documentation</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021, GreenAIUppa.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.2.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/usage/in_details.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>